version: 2.1

executors:
  default:
      
    docker:
      - image: cimg/python:3.11

    resource_class: small

jobs:

  build:
  
    parameters:
      python-version:
        type: string
        
    docker:
      - image: cimg/python:<< parameters.python-version >>

    resource_class: small
        
    steps:
      - checkout

      - run: pip install -e ".[dev]" -U

      - run: flake8 src examples

      - run: python -m unittest

workflows:

  build:
    jobs:
      - build:
         matrix:
            parameters:
              python-version: ["3.9", "3.11"]
